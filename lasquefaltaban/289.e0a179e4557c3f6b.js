"use strict";(self.webpackChunklasquefaltaban=self.webpackChunklasquefaltaban||[]).push([[289],{289:(J,h,i)=>{i.r(h),i.d(h,{CategoriesModule:()=>E});var d=i(6895),c=i(343),n=i(433),C=i(5226),l=i.n(C),t=i(8256),y=i(529),b=i(3900),m=i(9646),v=i(262),Z=i(2340);let g=(()=>{class o{constructor(e){this.http=e,this.url=`${Z.N.apiUrl}/category`,this.httpOptions={headers:new y.WM({"Content-Type":"application/json"})}}getCategories(){return this.http.get(this.url)}getCategoryById(e){return this.http.get(`${this.url}/${e}`,this.httpOptions)}addCategory(e){return this.http.post(`${this.url}`,{name:e},this.httpOptions)}deleteCategory(e){return this.http.delete(`${this.url}/${e}`,this.httpOptions).pipe((0,b.w)(r=>(0,m.of)(!0)),(0,v.K)(r=>(0,m.of)(!1)))}editCategory(e,r){return this.http.put(`${this.url}/${e}`,{name:r},this.httpOptions).pipe((0,b.w)(s=>(0,m.of)(!0)),(0,v.K)(s=>(0,m.of)(!1)))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(y.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var u=i(7500);function T(o,a){1&o&&(t.TgZ(0,"span",21),t._uU(1," El nombre de la categor\xeda debe tener como m\xednimo 2 letras y como m\xe1ximo 50 "),t.qZA())}let x=(()=>{class o{constructor(e,r,s){this.service=e,this.route=r,this.fb=s,this.name="",this.myForm=this.fb.group({name:["",[n.kI.required,n.kI.minLength(2),n.kI.maxLength(50)]]})}ngOnInit(){}notValid(e){return this.myForm?.controls[e]?.invalid&&this.myForm?.controls[e]?.touched}addCategory(){this.myForm.invalid?this.myForm.markAllAsTouched():this.service.addCategory(this.myForm.value.name).subscribe({next:e=>{l().fire({icon:"success",title:"Categor\xeda a\xf1adida",confirmButtonColor:"#8d448b"}),this.route.navigateByUrl("/category")},error:e=>{l().fire({icon:"error",title:"Categor\xeda no a\xf1adida",confirmButtonColor:"#8d448b"}),this.route.navigateByUrl("/category")}})}goBack(){window.history.back()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g),t.Y36(c.F0),t.Y36(n.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addcategory"]],decls:27,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-2"],[1,"col-10","ms-sm-auto","px-md-4","mb-5"],[3,"click"],["data-bs-toggle","tooltip","data-bs-placement","right","data-bs-title","Volver atr\xe1s",1,"material-symbols-outlined","ms-5","back"],[1,"ftco-section"],[1,"container","mb-5"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-7"],[1,"login-wrap","p-4","p-md-5"],[1,"icon","d-flex","align-items-center","justify-content-center"],[1,"material-symbols-outlined"],[1,"text-center","mb-5"],["autocomplete","off",1,"login-form",3,"formGroup","ngSubmit"],[1,"form-group","mb-5"],["for","username",1,"col-form-label"],["type","text","name","name","formControlName","name","required","",1,"form-control","rounded-left"],["class","form-text text-danger",4,"ngIf"],[1,"form-group","m5-5"],["type","submit",1,"btn","btn-primary","rounded","submit","p-3","px-5"],[1,"form-text","text-danger"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-sidebar"),t.qZA(),t.TgZ(4,"main",3)(5,"a",4),t.NdJ("click",function(){return r.goBack()}),t.TgZ(6,"i",5),t._uU(7,"arrow_back_ios"),t.qZA()(),t.TgZ(8,"section",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"i",12),t._uU(15,"category"),t.qZA()(),t.TgZ(16,"h3",13),t._uU(17,"A\xf1adir categor\xeda"),t.qZA(),t.TgZ(18,"form",14),t.NdJ("ngSubmit",function(){return r.addCategory()}),t.TgZ(19,"div",15)(20,"label",16),t._uU(21,"Nombre de categor\xeda"),t.qZA(),t._UZ(22,"input",17),t.YNc(23,T,2,0,"span",18),t.qZA(),t.TgZ(24,"div",19)(25,"button",20),t._uU(26,"Enviar"),t.qZA()()()()()()()()()()()),2&e&&(t.xp6(18),t.Q6J("formGroup",r.myForm),t.xp6(5),t.Q6J("ngIf",r.notValid("name")))},dependencies:[d.O5,u.k,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u],styles:[".material-symbols-outlined[_ngcontent-%COMP%]{font-size:50px;color:#fff}.back[_ngcontent-%COMP%]{font-size:3rem;color:#5e1f5d}.back[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),o})();var p=i(5415),A=i(7579);const U=function(o){return["/category/update",o]};function F(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"button",11),t.O4$(),t.TgZ(5,"svg",12),t._UZ(6,"path",13)(7,"path",14),t.qZA(),t._uU(8," Editar"),t.qZA(),t.kcU(),t.TgZ(9,"button",15),t.NdJ("click",function(){const f=t.CHM(e).$implicit,q=t.oxw();return t.KtG(q.deleteCategory(f.id))}),t.O4$(),t.TgZ(10,"svg",16),t._UZ(11,"path",17),t.qZA(),t._uU(12," Borrar"),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("routerLink",t.VKq(2,U,e.id))}}function O(o,a){1&o&&(t.TgZ(0,"span",20),t._uU(1," El nombre de la categor\xeda debe tener como m\xednimo 2 letras y como m\xe1ximo 50 "),t.qZA())}const w=[{path:"",component:(()=>{class o{constructor(e){this.categoryService=e,this.dtOptions={},this.dtTrigger=new A.x}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,processing:!0},this.categories=this.categoryService.getCategories().subscribe({next:e=>{this.categories=e,this.dtTrigger.next(this.categories)},error:e=>{l().fire({icon:"error",title:e,confirmButtonColor:"#8d448b"})}})}deleteCategory(e){this.categoryService.deleteCategory(e).subscribe({next:r=>{this.categories=r,l().fire({icon:"success",title:"Categor\xeda borrada",confirmButtonColor:"#8d448b"}).then(s=>{location.reload()})},error:r=>{l().fire({icon:"error",title:"Categor\xeda no borrada",confirmButtonColor:"#8d448b"})}})}ngOnDestroy(){this.dtTrigger.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-categorylist"]],viewQuery:function(e,r){if(1&e&&t.Gf(p.G,5),2&e){let s;t.iGM(s=t.CRH())&&(r.dtElement=s.first)}},decls:20,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-2"],[1,"col-10","ms-sm-auto","px-md-4"],[1,"d-flex","flex-column","flex-shrink-0","position-sticky","text-center"],[1,"display-5","fw-bold","mb-5"],["routerLink","/category/add"],[1,"btn","btn-success","btn-lg","pull-right","mb-5"],["datatable","",1,"table","table-bordered","table-striped","table-hover",3,"dtOptions","dtTrigger"],[1,"h4"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-info",2,"margin-left","10px",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil-square"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"],["type","button",1,"btn","btn-danger",2,"margin-left","10px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash3"],["d","M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-sidebar"),t.qZA(),t.TgZ(4,"main",3)(5,"div",4)(6,"h1",5),t._uU(7,"Listado de categor\xedas"),t.qZA(),t.TgZ(8,"a",6)(9,"button",7),t._uU(10,"+ Nueva"),t.qZA()(),t.TgZ(11,"table",8)(12,"thead")(13,"tr",9)(14,"th"),t._uU(15,"Nombre de categor\xeda"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Acciones"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,F,13,4,"tr",10),t.qZA()()()()()()),2&e&&(t.xp6(11),t.Q6J("dtOptions",r.dtOptions)("dtTrigger",r.dtTrigger),t.xp6(8),t.Q6J("ngForOf",r.categories))},dependencies:[d.sg,c.rH,c.yS,u.k,p.G],styles:["h1[_ngcontent-%COMP%]{color:#8d448b}.btn-success[_ngcontent-%COMP%]{font-size:20px;font-weight:700}"]}),o})()},{path:"add",component:x},{path:"update/:id",component:(()=>{class o{constructor(e,r,s,f){this.service=e,this.route=r,this.fb=s,this.activatedRoute=f,this.name="",this.myForm=this.fb.group({name:[this.name,[n.kI.required,n.kI.minLength(2),n.kI.maxLength(50)]]})}ngOnInit(){this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.service.getCategoryById(this.id).subscribe({next:e=>{this.category=e,this.myForm.setValue({name:this.category.name})}})}notValid(e){return this.myForm?.controls[e]?.invalid&&this.myForm?.controls[e]?.touched}editCategory(){this.myForm.invalid?this.myForm.markAllAsTouched():this.service.editCategory(this.category.id,this.myForm.value.name).subscribe({next:e=>{l().fire({icon:"success",title:"Categor\xeda editada",confirmButtonColor:"#8d448b"}),this.route.navigateByUrl("/category")},error:e=>{l().fire({icon:"error",title:"Categor\xeda no editada",confirmButtonColor:"#8d448b"}),this.route.navigateByUrl("/category")}})}goBack(){window.history.back()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g),t.Y36(c.F0),t.Y36(n.qu),t.Y36(c.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-updatecategory"]],decls:27,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-2"],[1,"col-10","ms-sm-auto","px-md-4"],[3,"click"],["data-bs-toggle","tooltip","data-bs-placement","right","data-bs-title","Volver atr\xe1s",1,"material-symbols-outlined","ms-5","back"],[1,"ftco-section"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-7"],[1,"login-wrap","p-4","p-md-5"],[1,"icon","d-flex","align-items-center","justify-content-center"],[1,"material-symbols-outlined"],[1,"text-center","mb-4"],["autocomplete","off",1,"login-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","username",1,"col-form-label"],["type","text","name","name","formControlName","name","required","",1,"form-control","rounded-left"],["class","form-text text-danger",4,"ngIf"],["type","submit",1,"btn","btn-primary","rounded","submit","p-3","px-5",3,"disabled"],[1,"form-text","text-danger"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-sidebar"),t.qZA(),t.TgZ(4,"main",3)(5,"a",4),t.NdJ("click",function(){return r.goBack()}),t.TgZ(6,"i",5),t._uU(7,"arrow_back_ios"),t.qZA()(),t.TgZ(8,"section",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"i",12),t._uU(15,"category"),t.qZA()(),t.TgZ(16,"h3",13),t._uU(17,"Editar categor\xeda"),t.qZA(),t.TgZ(18,"form",14),t.NdJ("ngSubmit",function(){return r.editCategory()}),t.TgZ(19,"div",15)(20,"label",16),t._uU(21,"Nombre de categor\xeda"),t.qZA(),t._UZ(22,"input",17),t.YNc(23,O,2,0,"span",18),t.qZA(),t.TgZ(24,"div",15)(25,"button",19),t._uU(26,"Enviar"),t.qZA()()()()()()()()()()()),2&e&&(t.xp6(18),t.Q6J("formGroup",r.myForm),t.xp6(5),t.Q6J("ngIf",r.notValid("name")),t.xp6(2),t.Q6J("disabled",r.myForm.invalid))},dependencies:[d.O5,u.k,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u],styles:[".material-symbols-outlined[_ngcontent-%COMP%]{font-size:50px;color:#fff}.back[_ngcontent-%COMP%]{font-size:3rem;color:#5e1f5d}.back[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),o})()}];let B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.Bz.forChild(w),c.Bz]}),o})();var M=i(4466);let E=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.ez,B,M.m,n.u5,n.UX,c.Bz,p.T]}),o})()}}]);